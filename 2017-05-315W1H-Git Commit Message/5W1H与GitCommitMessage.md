# 使用 "5W1H" 写出高可读的 Git Commit Message

    2017-05-31    FF
    原文链接：[使用 "5W1H" 写出高可读的 Git Commit Message](http://www.jianshu.com/p/62266af0eee9)
    原文作者：王仕军

## 前言

代码是编写一次，修改很多次，然后阅读更多次，所以良好的代码可读性是十分重要的；实际的工程中一段代码也要经历很多次维护，一个具有可读性强的工作日志，对于整个工程来说，也是十分重要的；如果不重视工作日志，那么很可能导致整个工程的维护变得十分低效，而且如果出现问题也是很难及时纠正的；

这篇文章，是以 Git Commit Message 为基础，来讲解如何添加合适的提交日志；

## 5W1H 与 Git Log

Git Log 本质是事件日志，通常会在线上出了问题、产品提出了需求、工程师自己做了重构或技术改进时才会导致它的变迁。如果没有详尽记录每次变迁的细节，代码 Review 的人怎么知道你做了什么？上线后遇到问题怎么去追溯？新人接手代码怎么去理解？

那么如何记录每次变迁的细节才会更加的高效呢？这里就引入了 5W1H 法则；
具体说就是谁（who）在什么时候（when）、什么地点（where）因为什么（why）而做了什么事情（what），他是怎么做的（how），通过记录这些信息来保存事件日志，你后来翻看的时候也不会错过细节。

在 Git 中，每一次提交都会自动记录 who 和 when 这两个方面的信息，而 where 又是不需要记录的信息，那么我们需要关注的信息就只有 why、what 和 how;

## 实践

1. 设置 .gitmessage 模板
    git 的内置支持使用 message 模板，你可以为每次提交的 commit message 设置一个模板，每一次提交的时候都可以按照模板的形式进行提交，例如：

        ```
            What: 简短的描述干了什么；

            Why:
                * 介绍自己为什么这样做，就是要说明这次改动的必要性，可以是需求来源，任务卡的链接，或者其他相关的资料；

            How：
                * 我是怎么做的？这么做会有什么副作用，需要说明的是使用了什么方法（比如数据结构、算法）来解决了哪个问题；
        ```

2. 让模板生效
    在全局 Git 配置文件 .gitmessage 中添加如下的配置：

        ```
            [commit]
                template= ~/.gitmessage

            //  ~/.gitmessage -- 模板路径； ~ ： C:\Users\Administrator
        ```
    或者使用命令：`git config --global commit.template   xxx_template`

    补充：设置 git 编辑器 `git config --global core.editor vim`

3. 拥抱新模板
    如果需要使用心得模板，我们就不能使用 `git commit -m "commie message"` 的提交方式了；
    而是使用 `git commit` 的提交方式；

## 总结

1. commit message 就是文档，活的文档，记录了仓库的所有变迁。
2. 怎么让你的代码可以追溯也是优秀工程师必备的素质，相信读到这里，你对如何写出高可读的 commit message 的原因、好处、方法有了清晰的认识，纸上得来终觉浅，绝知此事要躬行，接下来你就需要把这种方法运用到实际工作中；